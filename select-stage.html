<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select Protocol - Merkle Man</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;400;600;700&display=swap" rel="stylesheet">

    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        merkle: {
                            black: '#050505',
                            dark: '#0a0b10',
                            green: '#00ff41',
                            purple: '#bc13fe',
                            blue: '#00f3ff'
                        }
                    },
                    fontFamily: {
                        display: ['Orbitron', 'sans-serif'],
                        body: ['Rajdhani', 'sans-serif'],
                    },
                    backgroundImage: {
                        'grid-pattern': "linear-gradient(to right, #00ff4105 1px, transparent 1px), linear-gradient(to bottom, #00ff4105 1px, transparent 1px)",
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #050505;
            color: #ffffff;
            overflow: hidden;
            cursor: none;
            height: 100vh;
            width: 100vw;
        }

        html {
            overflow: hidden;
            height: 100vh;
            width: 100vw;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0a0b10;
        }
        ::-webkit-scrollbar-thumb {
            background: #00ff41;
            border-radius: 4px;
        }

        /* Custom Cursor */
        #cursor {
            width: 20px;
            height: 20px;
            border: 2px solid #00ff41;
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            transition: width 0.2s, height 0.2s, background-color 0.2s;
            mix-blend-mode: difference;
        }
        #cursor.hovered {
            width: 50px;
            height: 50px;
            background-color: rgba(0, 255, 65, 0.2);
            border-color: #bc13fe;
        }

        /* Level Selection Active State */
        .level-card.active .selection-ring {
            border-color: white;
        }
        .level-card.active .selection-dot {
            opacity: 1;
            transform: scale(1);
        }

        /* Mobile adjustments */
        @media (max-width: 768px) {
            #cursor {
                display: none;
            }
            body {
                cursor: auto;
            }
        }
    </style>
</head>
<body class="font-body selection:bg-merkle-green selection:text-black">

    <!-- Custom Cursor -->
    <div id="cursor"></div>

    <!-- LOADING SCREEN (Street Fighter Style) - Hidden by default -->
    <div id="loader" class="fixed inset-0 z-[100] flex overflow-hidden font-display bg-black select-none" style="display: none;">
        <!-- Left Side (Hero) -->
        <div id="loader-left" class="w-1/2 h-full bg-merkle-dark border-r-4 border-merkle-green flex flex-col items-end justify-center pr-4 md:pr-10 relative transform -translate-x-full z-10">
            <div class="text-merkle-green text-4xl md:text-6xl font-black italic tracking-tighter">MERKLE</div>
            <div class="text-white text-3xl md:text-5xl font-bold uppercase">Man</div>
            <div class="mt-4 px-4 py-1 bg-merkle-green text-black font-bold text-xs uppercase tracking-widest">Player 1</div>
            <!-- Decorative grid -->
            <div class="absolute inset-0 bg-grid-pattern opacity-10 pointer-events-none"></div>
            <!-- Character Portrait Silhouette (CSS-based) -->
             <div class="absolute bottom-0 left-0 w-full h-3/4 opacity-10 pointer-events-none" style="background: radial-gradient(circle at bottom left, #00ff41, transparent 60%);"></div>
        </div>

        <!-- Right Side (Villain) -->
        <div id="loader-right" class="w-1/2 h-full bg-[#1a0505] border-l-4 border-red-600 flex flex-col items-start justify-center pl-4 md:pl-10 relative transform translate-x-full z-10">
            <div class="text-red-500 text-4xl md:text-6xl font-black italic tracking-tighter text-right md:text-left">TOOTH</div>
            <div class="text-white text-3xl md:text-5xl font-bold uppercase text-right md:text-left">THIEF</div>
            <div class="mt-4 px-4 py-1 bg-red-600 text-white font-bold text-xs uppercase tracking-widest">Challenger</div>
            <!-- Decorative noise -->
            <div class="absolute inset-0 opacity-10 pointer-events-none" style="background-image: repeating-linear-gradient(45deg, #ff0000 0, #ff0000 1px, transparent 0, transparent 50%); background-size: 10px 10px;"></div>
             <div class="absolute bottom-0 right-0 w-full h-3/4 opacity-10 pointer-events-none" style="background: radial-gradient(circle at bottom right, #ff0000, transparent 60%);"></div>
        </div>

        <!-- Center VS Logo -->
        <div id="loader-vs" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-20 flex items-center justify-center opacity-0 scale-0">
            <div class="relative">
                <div class="text-8xl md:text-9xl font-black italic text-transparent bg-clip-text bg-gradient-to-b from-yellow-300 via-yellow-500 to-yellow-700 drop-shadow-[0_0_30px_rgba(234,179,8,0.8)]" style="-webkit-text-stroke: 2px white;">
                    VS
                </div>
                <div class="absolute inset-0 animate-pulse mix-blend-overlay bg-yellow-400 blur-xl opacity-50"></div>
            </div>
        </div>

        <!-- Loading Text -->
        <div id="loader-text" class="absolute bottom-10 left-1/2 transform -translate-x-1/2 text-white/50 font-mono text-xs md:text-sm tracking-[0.5em] z-20 opacity-0">
            INITIALIZING_GAME_DATA...
        </div>
    </div>

    <!-- Background Grid -->
    <div class="fixed inset-0 bg-grid-pattern bg-[length:40px_40px] pointer-events-none z-[-1] opacity-20"></div>

    <!-- LEVEL SELECT -->
    <section class="h-screen flex items-center justify-center bg-merkle-black relative overflow-hidden">
        <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-merkle-dark via-merkle-black to-black opacity-80"></div>

        <div class="container mx-auto px-6 relative z-10">
            <h2 class="text-3xl md:text-5xl font-display font-bold text-center mb-8 md:mb-16">SELECT <span class="text-white">PROTOCOL</span></h2>

            <div class="grid md:grid-cols-2 gap-4 md:gap-8 max-w-5xl mx-auto">
                <!-- Level 1: Chase an MC -->
                <button class="level-card group relative h-64 md:h-96 w-full text-left overflow-hidden rounded-xl md:rounded-2xl border border-merkle-green/30 bg-merkle-dark hover:border-merkle-green transition-all duration-500" onclick="selectLevel(1)">
                    <!-- Background Image (Dimmed) -->
                    <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1551808525-51a943718d16?q=80&w=2000&auto=format&fit=crop')] bg-cover bg-center opacity-40 group-hover:opacity-60 transition-opacity duration-500 group-hover:scale-110 transform"></div>
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/80 to-transparent"></div>

                    <!-- Content -->
                    <div class="absolute bottom-0 p-4 md:p-8 w-full z-10">
                        <div class="text-merkle-green font-mono text-xs md:text-sm mb-1 md:mb-2 tracking-widest">MISSION 01</div>
                        <h3 class="text-2xl md:text-4xl font-display font-bold text-white mb-2 md:mb-4 group-hover:text-merkle-green transition-colors">CHASE AN MC</h3>
                        <p class="text-sm md:text-base text-gray-400 mb-3 md:mb-6 max-w-md group-hover:text-white transition-colors">Pursue the rogue Malicious Code through the mempool data streams. High speed velocity required.</p>
                        <div class="flex items-center space-x-2 text-merkle-green opacity-0 group-hover:opacity-100 transition-opacity transform translate-y-4 group-hover:translate-y-0 duration-300">
                            <span class="text-xs md:text-base font-bold uppercase tracking-widest">Select Mission</span>
                            <i data-lucide="arrow-right" class="w-4 h-4 md:w-5 md:h-5"></i>
                        </div>
                    </div>

                    <!-- Selection Indicator -->
                    <div class="selection-ring absolute top-3 right-3 md:top-6 md:right-6 w-6 h-6 md:w-8 md:h-8 rounded-full border-2 border-gray-600 flex items-center justify-center transition-colors duration-300">
                        <div class="selection-dot w-3 h-3 md:w-4 md:h-4 bg-merkle-green rounded-full opacity-0 transform scale-0 transition-all duration-300"></div>
                    </div>
                </button>

                <!-- Level 2: Blaze an MC -->
                <button class="level-card group relative h-64 md:h-96 w-full text-left overflow-hidden rounded-xl md:rounded-2xl border border-merkle-purple/30 bg-merkle-dark hover:border-merkle-purple transition-all duration-500" onclick="selectLevel(2)">
                    <!-- Background Image (Dimmed) -->
                    <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=1964&auto=format&fit=crop')] bg-cover bg-center opacity-40 group-hover:opacity-60 transition-opacity duration-500 group-hover:scale-110 transform"></div>
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/80 to-transparent"></div>

                    <!-- Content -->
                    <div class="absolute bottom-0 p-4 md:p-8 w-full z-10">
                        <div class="text-merkle-purple font-mono text-xs md:text-sm mb-1 md:mb-2 tracking-widest">MISSION 02</div>
                        <h3 class="text-2xl md:text-4xl font-display font-bold text-white mb-2 md:mb-4 group-hover:text-merkle-purple transition-colors">BLAZE AN MC</h3>
                        <p class="text-sm md:text-base text-gray-400 mb-3 md:mb-6 max-w-md group-hover:text-white transition-colors">Engage in direct combat with the Master Chain corruption. Heavy firepower authorized.</p>
                        <div class="flex items-center space-x-2 text-merkle-purple opacity-0 group-hover:opacity-100 transition-opacity transform translate-y-4 group-hover:translate-y-0 duration-300">
                            <span class="text-xs md:text-base font-bold uppercase tracking-widest">Select Mission</span>
                            <i data-lucide="arrow-right" class="w-4 h-4 md:w-5 md:h-5"></i>
                        </div>
                    </div>

                    <!-- Selection Indicator -->
                    <div class="selection-ring absolute top-3 right-3 md:top-6 md:right-6 w-6 h-6 md:w-8 md:h-8 rounded-full border-2 border-gray-600 flex items-center justify-center transition-colors duration-300">
                        <div class="selection-dot w-3 h-3 md:w-4 md:h-4 bg-merkle-purple rounded-full opacity-0 transform scale-0 transition-all duration-300"></div>
                    </div>
                </button>
            </div>

            <!-- Dynamic Output Area -->
            <div id="mission-status" class="mt-6 md:mt-12 text-center h-12 md:h-16 opacity-0 transition-opacity duration-500">
                <div class="inline-block px-4 md:px-8 py-2 md:py-3 border border-white/20 bg-white/5 rounded-full backdrop-blur-md">
                    <span class="font-mono text-xs md:text-sm tracking-[0.1em] md:tracking-[0.2em] text-white" id="mission-text">AWAITING SELECTION...</span>
                </div>
            </div>
        </div>
    </section>

    <!-- LOGIC -->
    <script>
        // Initialize Icons
        lucide.createIcons();

        // --- Custom Cursor Logic ---
        const cursor = document.getElementById('cursor');
        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
        });

        const interactiveElements = document.querySelectorAll('a, button, input');
        interactiveElements.forEach(el => {
            el.addEventListener('mouseenter', () => cursor.classList.add('hovered'));
            el.addEventListener('mouseleave', () => cursor.classList.remove('hovered'));
        });

        // --- LEVEL SELECTION LOGIC ---
        function selectLevel(id) {
            // Remove active state from all
            document.querySelectorAll('.level-card').forEach(card => card.classList.remove('active'));

            // Add active state to selected
            const cards = document.querySelectorAll('.level-card');
            cards[id-1].classList.add('active');

            // Dynamic Text Logic
            const statusArea = document.getElementById('mission-status');
            const statusText = document.getElementById('mission-text');

            statusArea.style.opacity = '1';

            // GSAP Scramble Effect
            gsap.registerPlugin(TextPlugin);

            if(id === 1) {
                gsap.to(statusText, {duration: 1, text: "MISSION CONFIRMED: PURSUIT MODE ENGAGED", ease: "none", delimiter: ""});
                statusText.className = "font-mono text-xs md:text-sm tracking-[0.1em] md:tracking-[0.2em] text-merkle-green";

                // Show loading screen after brief delay
                setTimeout(() => {
                    showLoadingScreen();
                }, 1000);
            } else {
                gsap.to(statusText, {duration: 1, text: "MISSION CONFIRMED: LETHAL FORCE AUTHORIZED", ease: "none", delimiter: ""});
                statusText.className = "font-mono text-xs md:text-sm tracking-[0.1em] md:tracking-[0.2em] text-merkle-purple";

                // For Mission 02, navigate directly for now (no loading screen yet)
                setTimeout(() => {
                    window.location.href = 'game.html?level=2';
                }, 1500);
            }
        }

        // --- LOADING SCREEN ANIMATION ---
        function showLoadingScreen() {
            const loader = document.getElementById('loader');
            loader.style.display = 'flex';

            const loaderTl = gsap.timeline({
                onComplete: () => {
                    window.location.href = 'game.html?level=1';
                }
            });

            // 1. Panels Slide In (Impact)
            loaderTl.to("#loader-left", { x: "0%", duration: 0.8, ease: "power4.inOut" })
                    .to("#loader-right", { x: "0%", duration: 0.8, ease: "power4.inOut" }, "<")
            // 2. VS Slam & Shake
                    .to("#loader-vs", { scale: 1, opacity: 1, duration: 0.5, ease: "elastic.out(1, 0.4)" })
                    .to("#loader", { x: "+=5", y: "+=5", repeat: 5, duration: 0.04, yoyo: true }, "<0.1") // Screen Shake
            // 3. Text Type/Flash
                    .to("#loader-text", { opacity: 1, duration: 0.1, repeat: 3, yoyo: true }, "+=0.2")
                    .to({}, { duration: 1 }) // Wait for "load"
            // 4. Exit Animation (Curtain Open)
                    .to("#loader-vs", { scale: 0, opacity: 0, duration: 0.3 })
                    .to("#loader-text", { opacity: 0, duration: 0.2 }, "<")
                    .to("#loader-left", { x: "-100%", duration: 0.8, ease: "power2.inOut" })
                    .to("#loader-right", { x: "100%", duration: 0.8, ease: "power2.inOut" }, "<");
        }
    </script>
</body>
</html>
